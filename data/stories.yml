version: "3.1"

stories:

- story: save user
  steps:
  - intent: greet
  - action: action_saveUser

# TODO: develop chitchat stories

#TO DO: develop story where user starts chat
- story: sad
  steps:
  - intent: greet
  - action: action_saveUser
  - action: utter_greet
  - intent: mood_unhappy
  - action: utter_howLongChange

- story: happy
  steps:
  - intent: greet
  - action: action_saveUser
  - action: utter_greet
  - intent: mood_great
  - action: utter_goodMood

# Chatbot starts conversation
- story: evrything good
  steps:
  - action: action_initiate_conversation
  - or:
    - intent: affirm
    - intent: everythingFine
  - action: utter_goodChange
  - action: utter_askPermission

- story: everyhting not good
  steps:
  - action: action_initiate_conversation
  - or:
    - intent: deny
    - intent: everythingNotFine
  - action: utter_badChange

- story: badchange permission
  steps:
  - action: utter_badChange
  - or:
    - intent: affirm
    - intent: permission
  - action: utter_howLongChange

- story: badchange no permission
  steps:
  - action: utter_badChange
  - or:
    - intent: deny
    - intent: noPermission
  - action: utter_persuad
  # - or:
  #   - intent: affirm
  #   - intent: permission
  # - action: utter_howLongChange

- story: yes permission
  steps:
  - action: utter_askPermission
  - or:
    - intent: affirm
    - intent: permission
  - action: utter_howLongChange

- story: no permission
  steps:
  - action: utter_askPermission
  - or:
    - intent: deny
    - intent: noPermission
  - action: utter_persuad
  # - or:
  #   - intent: affirm
  #   - intent: permission
  # - action: utter_howLongChange

- story: persuaded
  steps:
  - action: utter_persuad
  - or:
    - intent: affirm
    - intent: permission
  - action: utter_howLongChange

- story: not persuaded
  steps:
  - action: utter_persuad
  - or:
    - intent: deny
    - intent: noPermission
  - action: utter_checkLater

# SLEEP CONVERSATIONS
- story: conv sleep start
  steps:
  - intent: start
  - slot_was_set:
    - sleep: true
  - action: action_initiate_conversation

- story: less than week sleep
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_howLongChange
  - or:
    - intent: lessWeek
    - intent: deny
  - action: utter_askSleep

- story: more than week sleep
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_howLongChange
  - or:
    - intent: affirm
    - intent: notSure
    - intent: moreWeek
  - action: utter_howLong
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askSleep

- story: week sleep
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_howLongChange
  - intent: week
    entities:
      - value: 1 
  - action: action_scoreAdd
  - action: utter_askSleep

- story: sleeps more than 8 hours
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askSleep
  - or:
    - intent: affirm
    - intent: notSure
    - intent: sleepMore8
  - action: utter_askHypersomnia
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askMood

- story: sleeps less
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askSleep
  - or:
    - intent: deny
    - intent: sleepLess8
    - intent: sleepIrregular
  - action: utter_askSleepTrouble

- story: has sleep trouble
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askSleepTrouble
  - or:
    - intent: troubleSleep
    - intent: affirm
    - intent: notSure
  - action: utter_askOnsetIns
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askWakeupEarly
  # - action: utter_askSleepWakeup

- story: has no sleep trouble
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askSleepTrouble
  - or:
    - intent: noTroubleSleep
    - intent: deny
  - action: utter_askWakeupEarly
  # - action: utter_askSleepWakeup

- story: doesn't wakeup early
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askWakeupEarly
  - or:
    - intent: dontWakeEarly
    - intent: deny
  - action: utter_askSleepWakeup

- story: wakeup early
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askWakeupEarly
  - or:
    - intent: notSure
    - intent: affirm
    - intent: wakeEarly
  - action: utter_askMorningIns
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askSleepWakeup

- story: has wakeup trouble
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askSleepWakeup
  - or:
    - intent: troubleSleep
    - intent: affirm 
    - intent: notSure
    - intent: restlessSleep
  - action: utter_askMidIns
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: action_scoreCheck
  - checkpoint: scoreCheck

- story: has no wakeup trouble
  steps:
  - slot_was_set:
    - sleep: true
  - action: utter_askSleepWakeup
  - or:
    - intent: noTroubleSleep
    - intent: deny 
    - intent: normalSleep
  - action: action_scoreCheck
  - checkpoint: scoreCheck

#END SLEEP CONVERSATIONS


# ACTIVITY CONVERSATIONS

- story: conv activity start
  steps:
  - intent: start
  - slot_was_set:
    - sleep: false
  - action: action_initiate_conversation

- story: more than week activity
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_howLongChange
  - or:
    - intent: affirm
    - intent: notSure
    - intent: moreWeek
  - action: utter_howLong
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askActivity

- story: change less than week activity
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_howLongChange
  - or:
    - intent: lessWeek
    - intent: deny
  - action: utter_askActivity

- story: has activity
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askActivity
  - or:
    - intent: participateActivity
    - intent: affirm 
  - action: utter_askActivityEnjoy

- story: enjoy activity usual
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askActivityEnjoy
  - or:
    - intent: enjoyNormal
    - intent: deny
  - action: utter_askInterest

- story: enjoy activity less than usual
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askActivityEnjoy
  - or:
    - intent: affirm
    - intent: notSure
  - action: utter_askActivityEnjoyLess
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askInterest

- story: has no activity
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askActivity
  - or:
    - intent: didntParticipateActivity
    - intent: deny 
  - action: utter_askActivityNo
  - or:
    - intent: reasonActivity
    - intent: notSure
  - action: utter_askInterest

- story: has no interest
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askInterest
  - or:
    - intent: noInterest
    - intent: affirm
  - action: utter_askInterestLevel
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askEnergy

- story: has interest
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askInterest
  - or:
    - intent: interest
    - intent: deny
  - action: utter_askEnergy

- story: energy change
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askEnergy
  - or:
    - intent: affirm
    - intent: notSure
    - intent: energyTired
  - action: utter_askTired
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: utter_askPhysicalEnergy

- story: no energy change
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askEnergy
  - intent: deny
  - action: utter_askPhysicalEnergy

- story: weighted down
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askPhysicalEnergy
  - intent: affirm
  - action: utter_askPhysicalEnergyInterfere

- story: not weighted down
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askPhysicalEnergy
  - intent: deny
  - action: action_scoreCheck
  - checkpoint: scoreCheck

- story: interferes
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askPhysicalEnergyInterfere
  - intent: affirm
  - action: utter_askPhysicalEnergyTime
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: action_scoreCheck
  - checkpoint: scoreCheck

- story: doesn't interfere
  steps:
  - slot_was_set:
    - sleep: false
  - action: utter_askPhysicalEnergyInterfere
  - action: action_scoreAdd
  - action: action_scoreCheck
  - checkpoint: scoreCheck

# END ACTIVITY CONVERSATIONS


# SCORE CHECKS

- story: score high ask general
  steps:
  - checkpoint: scoreCheck
  - slot_was_set:
    - general: true
  - intent: general
  - action: utter_askMood

- story: score low say bye
  steps:
  - checkpoint: scoreCheck
  - intent: checklater
  - action: utter_checkLater  

- story: final score low
  steps:
  - checkpoint: finalScore
  - intent: checklater
  - action: utter_checkLater  

- story: final score high
  steps:
  - checkpoint: finalScore
  - intent: therapy
  - action: utter_therapy

# END SCORE CHECKS


# GENERAL QUESTIONS

- story: good mood
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askMood
  - or:
    - intent: mood_great
    - intent: deny
  - action: utter_askAnxious

- story: bad mood
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askMood
  - or:
    - intent: mood_unhappy
    - intent: affirm
    - intent: notSure
  - action: utter_howOftenMood
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd
  - action: utter_askAnxious

- story: is anxious
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAnxious
  - or:
    - intent: affirm
    - intent: notSure
    - intent: anxious
  - action: utter_askAnxiousTime
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: utter_askIrritable

- story: is not anxious
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAnxious
  - intent: deny
  - action: utter_askIrritable

- story: is irritable
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askIrritable
  - or:
    - intent: angry
    - intent: affirm
    - intent: notSure
  - action: utter_askIrritableTime
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd 
  - action: utter_askSlowedDown

- story: is not irritable
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askIrritable
  - or:
    - intent: notAngry
    - intent: deny
  - action: utter_askSlowedDown

- story: is not slowed down
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askSlowedDown
  - intent: deny
  - action: utter_askConcentration

- story: can concentrate
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askConcentration
  - or:
    - intent: concentrate
    - intent: deny
  - action: utter_askFuture

- story: cannot concentrate
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askConcentration
  - or:
    - intent: affirm
    - intent: notSure
    - intent: cantConcentrate
  - action: utter_askConcentrationTrouble
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: utter_askFuture

- story: is slowed down
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askSlowedDown
  - or:
    - intent: affirm
    - intent: notSure
  - action: utter_askSlowedDownSeverity
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: utter_askConcentration
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: utter_askFuture

- story: is pessmitstic
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askFuture
  - or:
    - intent: affirm
    - intent: notSure
    - intent: pessimistic
  - action: utter_askPessimistic
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd 
  - action: utter_askWeight

- story: is not pessimistic
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askFuture
  - or:
    - intent: optimistic
    - intent: deny
  - action: utter_askWeight

- story: no weight change
  steps:
  - action: utter_askWeight
  - slot_was_set:
    - general: true
  - or:
    - intent: notSure
    - intent: noWeightChange
    - intent: deny
  - action: utter_askAppetite

- story: weight change
  steps:
  - action: utter_askWeight
  - slot_was_set:
    - general: true
  - or:
    - intent: notSure
    - intent: affirm
    - intent: weightChange
  - action: utter_askWeightIncOrDec

- story: gained weight
  steps:
  - action: utter_askWeight
  - slot_was_set:
    - general: true
  - or:
    - intent: increase
    - intent: weightGain
  - action: utter_askWeightInc
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd 
  - action: utter_askAppetite

- story: lost weight
  steps:
  - action: utter_askWeight
  - slot_was_set:
    - general: true
  - or:
    - intent: decrease
    - intent: weightLoss
  - action: utter_askWeightDec
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd 
  - action: utter_askAppetite

- story: weight increase
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askWeightIncOrDec
  - or:
    - intent: weightGain
    - intent: increase
  - action: utter_askWeightInc
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd 
  - action: utter_askAppetite

- story: weight decrease
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askWeightIncOrDec
  - or:
    - intent: weightLoss
    - intent: decrease
  - action: utter_askWeightDec
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: utter_askAppetite

- story: no appetite change
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAppetite
  - or:
    - intent: noAppetiteChange
    - intent: deny
  - action: action_scoreFinal

- story: appetite change
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAppetite
  - or:
    - intent: notSure
    - intent: affirm
    - intent: appetiteChange
  - action: utter_askAppetiteIncOrDec

- story: gained appetite
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAppetite
  - or:
    - intent: increase
    - intent: appetiteInc
  - action: utter_askAppetiteInc
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd 
  - action: action_scoreFinal
  - checkpoint: finalScore

- story: lost appetite
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAppetite
  - or:
    - intent: decrease
    - intent: appetiteDec
  - action: utter_askAppetiteDec
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd 
  - action: action_scoreFinal
  - checkpoint: finalScore

- story: appetite increase
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAppetiteIncOrDec
  - or: 
    - intent: appetiteInc
    - intent: increase
  - action: utter_askAppetiteInc
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: action_scoreFinal
  - checkpoint: finalScore

- story: appetite decrease
  steps:
  - slot_was_set:
    - general: true
  - action: utter_askAppetiteIncOrDec
  - or:
    - intent: appetiteDec
    - intent: decrease
  - action: utter_askAppetiteDec
  - intent: score
    entities:
      - value: 1  
  - action: action_scoreAdd  
  - action: action_scoreFinal
  - checkpoint: finalScore

# END GENERAL QUESTIONS
